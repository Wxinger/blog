import{_ as n,o as a,c as l,O as p}from"./chunks/framework.1396f752.js";const u=JSON.parse('{"title":"禁止页面缩放","description":"","frontmatter":{"title":"禁止页面缩放","author":"wx","date":"2022-09-02","showAccessNumber":"true,","categories":["知识积累"],"tag":["HTML","基础"]},"headers":[],"relativePath":"html/article/html.md","filePath":"html/article/html.md","lastUpdated":1747297450000}'),e={name:"html/article/html.md"};function o(c,s,t,r,E,i){return a(),l("div",null,s[0]||(s[0]=[p(`<h1 id="html-在移动端中禁止页面缩放" tabindex="-1">HTML 在移动端中禁止页面缩放 <a class="header-anchor" href="#html-在移动端中禁止页面缩放" aria-label="Permalink to &quot;HTML 在移动端中禁止页面缩放&quot;">​</a></h1><p>在移动端中，渲染HTML文档，是使用的是webview。</p><p>阻止webView缩放,在webView中添加以下代码</p><h2 id="方案一-viewport-meta-标签强制锁定-基础必选-​" tabindex="-1">方案一 Viewport Meta 标签强制锁定（基础必选）​ <a class="header-anchor" href="#方案一-viewport-meta-标签强制锁定-基础必选-​" aria-label="Permalink to &quot;方案一 Viewport Meta 标签强制锁定（基础必选）​&quot;">​</a></h2><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">meta</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">name</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;viewport&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">content</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">meta</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;viewport&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">content</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no&quot;</span><span style="color:#24292E;"> /&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>标签说明</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">width 　　　　 　　　　 // 设置 viewport 的宽度，正整数/字符串 device-width</span></span>
<span class="line"><span style="color:#e1e4e8;">height 　　　　　　　　 // 设置 viewport 的高度，正整数/字符串 device-height</span></span>
<span class="line"><span style="color:#e1e4e8;">initial-scale  　　　 // 设置设备宽度与 viewport大小之间的缩放比例，0.0-10.0之间的正数</span></span>
<span class="line"><span style="color:#e1e4e8;">maximum-scale 　　　　// 设置最大缩放系数，0.0-10.0之间的正数</span></span>
<span class="line"><span style="color:#e1e4e8;">minimum-scale 　　　　// 设置最小缩放系数，0.0-10.0之间的正数</span></span>
<span class="line"><span style="color:#e1e4e8;">user-scalable 　　　　// 如果设置为 no 用户将不能缩放网页，默认为 yes，yes / no</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">width 　　　　 　　　　 // 设置 viewport 的宽度，正整数/字符串 device-width</span></span>
<span class="line"><span style="color:#24292e;">height 　　　　　　　　 // 设置 viewport 的高度，正整数/字符串 device-height</span></span>
<span class="line"><span style="color:#24292e;">initial-scale  　　　 // 设置设备宽度与 viewport大小之间的缩放比例，0.0-10.0之间的正数</span></span>
<span class="line"><span style="color:#24292e;">maximum-scale 　　　　// 设置最大缩放系数，0.0-10.0之间的正数</span></span>
<span class="line"><span style="color:#24292e;">minimum-scale 　　　　// 设置最小缩放系数，0.0-10.0之间的正数</span></span>
<span class="line"><span style="color:#24292e;">user-scalable 　　　　// 如果设置为 no 用户将不能缩放网页，默认为 yes，yes / no</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="方案二-javascript-事件拦截-终极防御-​" tabindex="-1">方案二 JavaScript 事件拦截（终极防御）​ <a class="header-anchor" href="#方案二-javascript-事件拦截-终极防御-​" aria-label="Permalink to &quot;方案二 JavaScript 事件拦截（终极防御）​&quot;">​</a></h2><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 阻止双指缩进</span></span>
<span class="line"><span style="color:#E1E4E8;">document.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;gesturestart&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">event</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    event.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 阻止双击缩放</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> lastTouchEnd </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">document.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;touchend&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">event</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">now</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Date.</span><span style="color:#B392F0;">now</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (now </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> lastTouchEnd </span><span style="color:#F97583;">&lt;=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">300</span><span style="color:#E1E4E8;">) e.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  lastTouchEnd </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> now;</span></span>
<span class="line"><span style="color:#E1E4E8;">}, { passive: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 阻止键盘缩放</span></span>
<span class="line"><span style="color:#E1E4E8;">document.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;keydown&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (e.ctrlKey </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> (e.key </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;+&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> e.key </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;-&#39;</span><span style="color:#E1E4E8;">)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    e.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#F97583;">**</span><span style="color:#E1E4E8;">注意</span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;">：iOS10以后版本不接受meta标签，可以通过js监听手势控制来实现禁止页面缩放  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">**</span><span style="color:#E1E4E8;">注意</span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;"> Safari </span><span style="color:#79B8FF;">15</span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> 会忽略user</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">scaleble</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 阻止双指缩进</span></span>
<span class="line"><span style="color:#24292E;">document.</span><span style="color:#6F42C1;">addEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;gesturestart&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">event</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    event.</span><span style="color:#6F42C1;">preventDefault</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 阻止双击缩放</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> lastTouchEnd </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">document.</span><span style="color:#6F42C1;">addEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;touchend&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">event</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">now</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Date.</span><span style="color:#6F42C1;">now</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (now </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> lastTouchEnd </span><span style="color:#D73A49;">&lt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">300</span><span style="color:#24292E;">) e.</span><span style="color:#6F42C1;">preventDefault</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  lastTouchEnd </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> now;</span></span>
<span class="line"><span style="color:#24292E;">}, { passive: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 阻止键盘缩放</span></span>
<span class="line"><span style="color:#24292E;">document.</span><span style="color:#6F42C1;">addEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;keydown&#39;</span><span style="color:#24292E;">, (</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (e.ctrlKey </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> (e.key </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;+&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> e.key </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;-&#39;</span><span style="color:#24292E;">)) {</span></span>
<span class="line"><span style="color:#24292E;">    e.</span><span style="color:#6F42C1;">preventDefault</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"><span style="color:#D73A49;">**</span><span style="color:#24292E;">注意</span><span style="color:#D73A49;">**</span><span style="color:#24292E;">：iOS10以后版本不接受meta标签，可以通过js监听手势控制来实现禁止页面缩放  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">**</span><span style="color:#24292E;">注意</span><span style="color:#D73A49;">**</span><span style="color:#24292E;"> Safari </span><span style="color:#005CC5;">15</span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> 会忽略user</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">scaleble</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="方案三-css-触摸事件拦截-增强防护" tabindex="-1">方案三 CSS 触摸事件拦截（增强防护） <a class="header-anchor" href="#方案三-css-触摸事件拦截-增强防护" aria-label="Permalink to &quot;方案三  CSS 触摸事件拦截（增强防护）&quot;">​</a></h2><div class="language-css vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">html</span><span style="color:#B392F0;">.body</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">touch-action</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">pan-x</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">pan-y</span><span style="color:#E1E4E8;">; </span><span style="color:#6A737D;">/* 仅允许水平和垂直滚动 */</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">-ms-touch-action</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">manipulation</span><span style="color:#E1E4E8;">; </span><span style="color:#6A737D;">/* IE 兼容 */</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">overscroll-behavior</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">contain</span><span style="color:#E1E4E8;">; </span><span style="color:#6A737D;">/* 阻止边缘弹性效果 */</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">/* 禁用双击缩放（Android 专属） */</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">*</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">touch-action</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">manipulation</span><span style="color:#E1E4E8;">; </span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">html</span><span style="color:#6F42C1;">.body</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">touch-action</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">pan-x</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">pan-y</span><span style="color:#24292E;">; </span><span style="color:#6A737D;">/* 仅允许水平和垂直滚动 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">-ms-touch-action</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">manipulation</span><span style="color:#24292E;">; </span><span style="color:#6A737D;">/* IE 兼容 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">overscroll-behavior</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">contain</span><span style="color:#24292E;">; </span><span style="color:#6A737D;">/* 阻止边缘弹性效果 */</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">/* 禁用双击缩放（Android 专属） */</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">*</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">touch-action</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">manipulation</span><span style="color:#24292E;">; </span></span>
<span class="line"><span style="color:#24292E;">  }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>注意</strong> Chrome 80+ 默认启用双击缩放，需此属性覆盖</p><p><em><strong><strong>结束</strong></strong></em></p>`,13)]))}const d=n(e,[["render",o]]);export{u as __pageData,d as default};
